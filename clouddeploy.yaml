apiVersion: deploy.cloud.google.com/v1
kind: DeliveryPipeline
metadata:
  name: flask-pipeline
description: Python Flask multi-stage deployment pipeline using Cloud Run
serialPipeline:
  stages:
    - targetId: dev
      strategy:
        standard:
          verify: false
          predeploy:
            actions: []
          postdeploy:
            actions: []
    - targetId: stg
      strategy:
        standard:
          verify: false
          predeploy:
            actions: []
          postdeploy:
            actions: []
    - targetId: prd
      strategy:
        standard:
          verify: false
          predeploy:
            actions: []
          postdeploy:
            actions: []

---

apiVersion: deploy.cloud.google.com/v1
kind: Target
metadata:
  name: dev
description: Dev environment in Cloud Run
run:
  location: projects/silent-octagon-460701-a0/locations/us-central1

---

apiVersion: deploy.cloud.google.com/v1
kind: Target
metadata:
  name: stg
description: Staging environment in Cloud Run
run:
  location: projects/silent-octagon-460701-a0/locations/us-central1

---

apiVersion: deploy.cloud.google.com/v1
kind: Target
metadata:
  name: prd
description: Production environment in Cloud Run
run:
  location: projects/silent-octagon-460701-a0/locations/us-central1
